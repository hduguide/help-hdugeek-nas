## 校园内网 ##
当你需要更快的速度来访问 [GeekNAS 主页](https://hdugeek.me/) 的内容，可以连接校园网来访问内网服务器，由于主页打开时会动态选择当前可用的服务器（校园内网服务器、虚拟局域网服务器、外网代理服务器）。不同服务器资源相同，仅速度不同，校园网最快可达100Mbps。

`校园网`特指能通过局域网地址访问学校网站等资源的环境。

### 校园网环境
包括教学区有线/无线网络，寝室电信等网络，连接方式有以下：

 - 连接`i-HDU`、`i_HDU`、`HDU_WLAN`等校内 Wi-Fi（Wi-Fi速度较差时请更换）
 - 通过教学区电脑设备、网口访问
 - 通过寝室内`电信`宽带网口访问

关于`寝室`连接校园网方案：

 - `电信`：拨号后能直接访问校内资源，推荐。
 - `移动`：只能使用vpn等代理访问，方法如下。

你可以访问[10.21.16.117](http://10.21.16.117)来测试是否处于校园网，打得开即为校园网

### 校园webvpn
使用学校 webvpn 访问校园网 web 环境（支持校园网内资源、查文献等），webvpn最快可达100Mbps。

 - 学校 webvpn：[获取帐号与密码](http://pwd.hdu.edu.cn/vpn.aspx)
 - 输入学号与手机号获取 24 小时密码，然后点击 vpn 入口，输入学号与密码，未安装学校的 easy connect 软件需要先行安装。
 - 使用学校 webvpn 访问，仅能访问校园网 80/443 端口下 web 应用，实现内网版常用的文件服务功能，但是无法访问基于其他端口的ftp，webdav等文件访问方式。
 - 更多关于 webvpn 的介绍可以看这里：[校外访问](http://www.lib.hdu.edu.cn/article4-d057ba7b-234b-43ee-a41d-5ef279f03e8d.html)
 - 你可以访问[10.21.16.117](http://10.21.16.117)来测试是否处于校园网，但是校园网下无法打开非80端口

## ZeroTier虚拟局域网

当您无法连接校园网或者觉得使用webvpn太麻烦、webvpn 帐号用完但是仍然需要更快的速度来访问 [GeekNAS 主页](https://hdugeek.me/) 的内容，你可以使用我们的虚拟局域网节点。由于主页打开时会动态选择当前可用的服务器（校园内网服务器、虚拟局域网服务器、外网代理服务器）。不同服务器资源相同，仅速度不同，虚拟局域网最快可达约50Mbps。

ZeroTier并不提供外网公开访问解决方案，需要使用类似VPN的客户端。ZeroTier可以实现异地P2P链接的虚拟局域网，支持全平台，使用只需2步骤，安装 ZeroTier 以及设备连接虚拟网络（Join Network）。以下以win操作为介绍，安卓、MAC、Linux等同理。

1. 访问[ZeroTier官网](https://www.zerotier.com/download/)下载软件，win系统请下载win版本并安装运行
2. 右键点击右下角 ZeroTier 图标，点击 “Join Network” 。

![](https://geeknas-1252054182.cos.ap-shanghai.myqcloud.com/1591904-20200406144053632-1510049353.png)

3. 窗口中输入要添加的虚拟网络的地址 ID：`a84ac5c10adf1d8a` ，点击 “Join” 。

![](https://geeknas-1252054182.cos.ap-shanghai.myqcloud.com/1591904-20200406144054452-1871050988.png)

4. 在弹出的网络连接中，点击 “是” 以加入虚拟网络。（如果您后续使用中断开后重连仍需点击“是”重新加入网络）

![](https://geeknas-1252054182.cos.ap-shanghai.myqcloud.com/1591904-20200406144055291-1201697383.png)

5. 右键点击右下角 ZeroTier 图标，可以看到添加的虚拟网络地址 ID，以及后缀（hdu-geek） ，并且在前显示勾选。

![](https://geeknas-1252054182.cos.ap-shanghai.myqcloud.com/1591904-20200406144056225-836710985.png)

5. **首次使用者需要点此发送邮件**[geeknas@outlook.com](mailto:geeknas@outlook.com?subject=ZeroTier局域网加入；学号：姓名：)来通过验证，如通过则qq、邮箱联系您，后续可以正常使用无需再次认证

6. 完成认证后你可以访问[172.22.22.22](http://172.22.22.22)来测试是否处于虚拟局域网，打得开即加入成功，或者可以尝试`ping 172.22.22.22`是否有数据返回

Tips：ZeroTier虚拟局域网技术属于P2P穿透技术，杭电移动宽带实测速度能达到5M/S，但是应避免在手机网络、热点、公共wifi下使用，由于热点、手机网络、公共wifi切换内网ip频繁，导致P2P穿透不稳定。其他操作系统教程参考:[cnblogs](https://www.cnblogs.com/Yogile/p/12502311.html)

hdu-geek ZeroTier虚拟局域网暂未添加MOON，如果您觉得穿透太慢，可以发邮件反馈；如果您有国内VPS搭建MOON亦可联系我们。任何加入hdu-geek ZeroTier虚拟局域网的用户可以在网上邻居内看到在线的虚拟局域网邻居，所以出于安全性需要第5步的邮件认证。

## 外网反向代理

当无法访问校园内网、懒得使用虚拟局域网时，均可使用 [GeekNAS 主页](https://hdugeek.me/)首页的自动代理功能，这是最一般外网用户访问主页时会自动切换的服务器。三台外网代理ARM架构服务器当前运行在杭电17、18级寝室中，采用闪讯路由器拨号、DDNS动态更新、NGINX反向代理实现，如您也对此感兴趣可以联系我们。不同服务器资源相同，仅速度不同，外网代理服务器限速30Mbps。

Tips：外网代理服务器似乎上传有些许问题，因此尽量使用校园网方式上传。未采用FRP是因为多次发现校园网切断FRP长连接并封锁ip，故改由NGINX反代方案。

## 总结-主页节点自动选择
当你需要下载大文件时，速度大于等于 4MB/s 时体验较好，以下展示您访问主页时会切换的节点：

- 使用电信宽带、校内较快网络的，访问主页后自动切换至校园网节点，限速100Mbps
- 当登录杭电vpn后，自动切换部分地址到校园网节点，部分自动代理节点，限速100Mbps
- 使用ZeroTier虚拟内网后，访问主页后自动切换至虚拟内网节点，限速约50Mbps
- 当纯外网访问时，自动切换到全自动代理节点，限速30Mbps

## 更多
### 多网卡访问问题
如果设备连接了两个（含）以上网络（移动数据＋WIFI 或者 网线＋WIFI），可能无法顺利访问校园网，简单的方式是只保留能访问校园网的一个。

### 速度说明
校园网最高传输带宽100Mbps，寝室电信上传时限速30Mbps，其他情况速度上限由路径决定。